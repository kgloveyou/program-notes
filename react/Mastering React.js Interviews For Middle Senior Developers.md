# 第1部分：安全

## 1. 什么是跨站脚本攻击（XSS），为何它会对 Web 应用构成安全威胁？

跨站脚本攻击（XSS）是一种安全漏洞，攻击者能够通过此漏洞将恶意脚本（通常为JavaScript）注入到网页应用中。这些脚本会在不知情用户的浏览器中执行，通常用户对此毫无察觉。XSS可被用于窃取敏感信息、冒充用户身份或以用户名义执行恶意操作。

### React.js中XSS漏洞的发生场景通常包括：

• 使用`dangerouslySetInnerHTML`时未对内容进行净化处理

• 将用户生成的内容动态插入DOM时未进行转义

• 使用不安全的第三方库或API处理数据

### 重要提示：

- 避免使用`dangerouslySetInnerHTML`：
  仅在必要时使用，并始终对输入内容进行净化处理。

- 净化输入：
  使用`DOMPurify`等库清理用户生成的内容。

- 内容安全策略（CSP）：
  实施CSP头部，将脚本来源限制为可信源。

- 信任React：
  对于大多数动态内容，请依赖React的默认转义机制。

## 8. 什么是跨站请求伪造（CSRF），为何它会对 Web 应用构成安全威胁？

跨站请求伪造（CSRF）是一种攻击方式，攻击者通过诱骗已认证用户在其访问的网页应用中执行非本意操作。这种攻击利用网页应用对用户浏览器的信任，在用户不知情的情况下利用其已认证会话发送未经授权的请求。

例如，攻击者可诱骗已登录用户提交恶意表单或点击隐藏链接，从而导致非预期的操作，如进行资金转账、修改账户设置或删除数据等。



跨站请求伪造（CSRF）是一种攻击方式，攻击者通过诱骗已认证用户在其访问的网页应用中执行非本意操作。这种攻击利用服务器与浏览器之间的信任关系，对处理敏感操作的应用程序构成严重安全威胁。

**重要提示**：
CSRF攻击利用已认证用户身份，保护敏感操作至关重要。

**防御措施**：
• 采用CSRF令牌、SameSite Cookie和严格CORS策略构建分层防御体系

• 对用户进行钓鱼攻击防范教育

• 关键操作避免使用GET请求

# 第9部分：React.js 与服务端渲染（SSR）

## 什么是服务端渲染（SSR），它在 React 中是如何工作的？

React 中的服务端渲染（SSR）是一种技术，指服务器在将页面发送至客户端前先生成初始 HTML。与客户端渲染（CSR）相比，这种方式能改善 SEO、加快初始加载速度并提升性能。

React 中 SSR 的工作流程：
1、用户请求页面 → 浏览器向服务器发送请求
2、服务器将 React 组件渲染为 HTML → 获取数据并创建预渲染页面
3、服务器向客户端发送 HTML → 用户立即看到内容
4、React 对页面进行水合处理 → 通过附加事件监听器添加交互功能

SSR 能提升 SEO 和首次绘制时间，因为在 JavaScript 执行前内容已可见。

## 与客户端渲染（CSR）相比，SSR 如何提升性能？

## SSR 与静态站点生成（SSG）的主要区别是什么？

服务端渲染（SSR）与静态站点生成（SSG）是 Next.js 等 React 框架中使用的两种渲染策略，旨在优化性能和搜索引擎优化。

- SSR（服务端渲染）→ 在每次请求时由服务器实时渲染页面，确保获取最新数据。

- SSG（静态站点生成）→ 在构建时预渲染页面，以静态 HTML 文件形式提供，可提升加载速度并减轻服务器负载。

## SSR 对 SEO 有何影响？为什么它对搜索引擎有益？

服务端渲染（SSR）通过预渲染HTML并直接向搜索引擎（如Google、Bing和DuckDuckGo）交付完整内容，显著提升搜索引擎优化（SEO）效果。

与客户端渲染（CSR）需要在浏览器执行JavaScript后才能显示内容不同，SSR确保搜索引擎爬虫能立即获取完整页面内容，从而有效改善索引收录、搜索排名和内容可发现性。



### SSR确保正常的社交媒体预览

Facebook、Twitter和LinkedIn等平台依赖Open Graph（OG）元数据。

示例：用于社交分享的 Open Graph 标签

```html
<head>
  <meta property="og:title" content="Best Laptops of 2024">
  <meta property="og:description" content="Check out the latest highperformance laptops.">
  <meta property="og:image" content="https://example.com/laptop.jpg">
</head>
```

优势：通过SSR，Open Graph元数据在JavaScript执行前就已就绪，确保生成完整的社交预览信息。

## React 服务端组件（RSC）是什么？它们与传统客户端组件有何不同？

React 服务端组件（RSC）是一种新型 React 组件，在服务端而非客户端执行。与传统客户端组件不同，RSC 不会向浏览器发送 JavaScript 代码，从而减小资源包体积、提升性能，并支持直接从数据库或 API 获取数据。

RSC 已在 Next.js 13+ 和 Next.js 15（App Router）等框架中提供使用。



## 什么是 React 服务端函数？

React 服务端函数是专门在服务器端执行的函数，它能实现 React 应用中客户端组件与服务端组件的无缝交互。通过使用 'use server' 指令定义函数，开发者可以直接从客户端组件调用服务端逻辑，无需手动发起 API 调用。这种方式简化了数据变更流程，通过将敏感操作保留在服务端来增强安全性，同时减小了客户端资源包体积。

React 服务端函数的核心特性：

- 服务端执行：函数在服务器端运行，可访问数据库和文件系统等服务器资源。
- 直接从客户端组件调用：客户端组件可像调用本地函数一样调用服务端函数，简化代码结构。
- 自动网络处理：框架自动管理客户端与服务器间的网络通信，为开发者隐藏复杂性。
- 增强安全性：敏感操作保留在服务器端，减少潜在安全风险。
- 减小客户端包体积：通过将逻辑移至服务器，最小化发送至客户端的 JavaScript 代码量，提升加载速度。

## Next.js 是什么？它如何改进 React 应用？

Next.js 是一个全栈 React 框架，提供服务器端渲染（SSR）、静态站点生成（SSG）、API 路由和内置优化功能，以提升性能、SEO 和开发体验。

它通过处理路由、渲染策略（SSR、SSG、ISR）和 API 集成来扩展 React 的能力，同时减少了数据获取、身份验证和图片优化等常见任务的样板代码。Next.js 既适用于客户端密集型应用，也适用于服务端渲染的 React 应用，是现代 Web 开发中最强大的框架之一。

## 解释 Next.js 中 SSR、SSG、ISR 和 CSR 的区别。

## React Suspense 在服务端渲染中的作用是什么？它如何提升性能？

## Next.js 中可以使用哪些缓存策略？

## Next.js 中的 API 路由是什么？它们如何工作？

Next.js 中的 API 路由允许开发者在 Next.js 项目内创建后端功能，无需单独的后端服务器。这些路由是服务端函数，可处理 HTTP 请求（GET、POST、PUT、DELETE）并返回 JSON 响应。

它们如同 Next.js 应用中的微型 API，无需搭建外部后端即可实现全栈功能。

## Next.js 中的动态路由如何工作？请举例说明。

# 第11部分：部署与持续集成/持续交付

## 103. 如何为生产环境打包和优化 React 应用程序？

打包和优化 React 生产应用程序可确保：
• 更快的加载速度（更小的打包体积）

• 更好的性能（延迟加载、代码分割）

• 提升 SEO 和用户体验

主要优化技术：
• 代码分割和延迟加载 → 减少初始打包体积

• 摇树优化 → 移除未使用代码

• 压缩和混淆 → 缩小 JavaScript、CSS 和 HTML 文件

• 优化图片和字体 → 使用 WebP 图片格式，延迟加载图片

• 缓存和 CDN → 提高资源交付速度


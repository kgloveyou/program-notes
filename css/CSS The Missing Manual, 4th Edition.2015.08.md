# CSS The Missing Manual, 4th Edition.2015.08

https://github.com/sawmac/css_mm_4e

# 第3章 

## 伪类和伪元素

有时你需要选择网页中没有明确标签的部分，但仍然很容易识别，比如段落的第一行或当你将鼠标悬停在链接上时。CSS 提供了一些用于这些特殊情况的选择器——伪类和伪元素。

### Styles for Links 

###  段落部分的样式化

`:first-letter`  

`:first-line`  

**注意：**

CSS3在伪类（如:hover）和伪元素之间添加了额外的冒号以进行区分。因此，:firstletter 和 :first-line 现在变成了 ::first-letter 和 ::first-line。幸运的是，为了保持对旧网站的支持，浏览器将继续支持单冒号版本的伪元素。这是件好事，因为Internet Explorer 8不理解双冒号语法，所以目前还是使用单冒号，因为其他所有浏览器仍然使用单冒号。

### 更多伪类和伪元素

**:FOCUS**
:focus 伪类的工作方式与 :hover 伪类非常相似。当访问者将鼠标悬停在链接上时，:hover 被应用，而当访问者做一些事情表明她关注网页元素时（通常是点击或通过 Tab 键进入），:focus 被应用。在编程术语中，当访问者在网页表单的文本框中单击时，她将焦点放在了该文本框上。这个点击是网页设计者知道访问者关注的位置的唯一线索。

:focus 选择器主要用于为访问者提供反馈，比如更改文本框的背景颜色以指示她即将输入的位置。（单行文本框、密码字段和多行 <textarea> 是 :focus 选择器的常见目标。）例如，以下样式为访问者单击或通过 Tab 键进入的任何文本框添加了浅黄色背景颜色：

```css
input:focus { background-color: #FFFFCC; }
```

:focus 选择器只在元素处于焦点状态时应用。当访问者切换到另一个文本字段或在页面的其他地方单击时，她会移除焦点，并且 CSS 属性也会失效。

**:BEFORE**  

:before 伪元素可以做到其他选择器做不到的事情：它允许你在给定元素之前添加内容。例如，假设你想在某些段落前添加“HOT TIP！”来突出它们，就像本书中的boxes上写着“UP TO SPEED”和“POWER USERS’ CLINIC”一样。你可以让 :before 选择器为你完成这个任务，而不是在页面的 HTML 中键入该文本。这种方法不仅节省了代码，而且如果你决定将消息从“HOT TIP！”更改为“Things to know”，那么你只需对样式表进行一次快速更改就可以更改网站上的每个页面。（缺点是，对于不理解 CSS 或不理解 :before 选择器的浏览器，这个特殊消息是看不见的。）

首先，创建一个类（例如 .tip）并将其应用于你想要在消息前置的段落上，如下所示：<p class="tip">。然后，将你的消息文本添加到样式表中：

```css
.tip:before {content: "HOT TIP!" }
```

每当浏览器遇到 tip 类时，它都会在该类的标记之前插入文本“HOT TIP!”。

通过这个选择器添加的文本的技术术语是生成的内容，因为浏览器会动态地创建（生成）它。在页面的 HTML 源代码中，这些内容是不存在的。无论你是否意识到，浏览器都会不断地生成它们自己的内容，比如项目符号列表中的项目符号和有序列表中的编号。如果你愿意，甚至可以使用 :before 选择器来定义浏览器如何显示其项目符号和编号。

Internet Explorer 8 及更高版本以及所有其他主流浏览器都支持 :before 选择器（以及接下来要介绍的 :after 选择器）。

**:AFTER**  

就像 :before 选择器一样，:after 伪元素添加的是生成的内容，但是是在元素之后，而不是之前。例如，你可以使用这个选择器在引用的材料后面添加闭合引号（"）。

```css
blockquote:after { content: '"'; }
```

这个例子将在每个 `<blockquote>` 元素的末尾添加一个闭合引号。

**::SELECTION**  



**提示**

学习如何编写选择器有时可能会感觉像学习象形文字一样。为了将选择器翻译成简单直接的语言，可以访问 Selectoracle 网站（http://gallery.theopalgroup.com/selectoracle）。这个很棒的资源允许你输入一个选择器，然后它会清晰地显示出该样式影响的页面元素。

## 属性选择器

CSS 提供了一种基于 HTML 属性来格式化标签的方法。例如，假设你想在页面中的图片周围加上边框，但只是在重要的照片周围加上，你不想包括标志、按钮和其他小部件，它们也有<img>标签。幸运的是，你意识到你已经使用 title 属性给所有的照片添加了描述，这意味着你可以使用属性选择器来识别只有重要的图片。

使用属性选择器，你可以单独选出具有特定属性的标签。例如，下面是如何选择所有带有 title 属性的 <img> 标签：

```css
img[title]
```

选择器的第一部分是标签的名称（img），而属性的名称放在方括号中：[title]。

CSS 不仅限于标签名称的属性选择器：你还可以将它们与类一起使用。例如，`.photo[title]` 选择具有 .photo 类样式和 HTML title 属性的每个元素。

要更具体地选择，你可以选择不仅共享特定属性，还有对该属性设置的确切值的元素。例如，当你想要突出显示指向特定 URL 的链接时，可以创建一个引人注目的属性选择器，如下所示：

```css
a[href="http://www.cafesoylentgreen.com"]{
    color: green;
    font-weight: bold;
}
```

在处理表单时，给属性选择器添加值非常有用。许多表单元素具有相同的标签，即使它们看起来和行为不同。复选框、文本框、提交按钮和其他表单字段都共享 <input> 标签。类型属性的值决定了字段的形式和功能。例如，`<input type="text">` 创建一个文本框，而 `<input type="checkbox">` 创建一个复选框。

要选择表单中的文本框，例如，使用这个选择器：

```css
input[type="text"]
```

属性选择器非常灵活。它不仅可以找到具有特定属性值的标签（例如，找到所有类型为复选框的表单字段），甚至可以选择具有以特定值开头、以特定值结尾或包含特定值的属性值的元素。虽然这可能听起来有些多余，但实际上非常方便。

例如，假设你想要创建一个特定的样式来突出显示外部链接（指向你自己网站之外的链接），以指示“嘿，如果你点击这个链接，你将离开这个站点”。假设你不使用绝对链接来链接到你的网站中的任何页面，你可以假定任何外部链接都以 http:// 开头——这是任何绝对链接的第一部分。

如果是这样，选择器将如下所示：

```css
a[href^="http://"]
```

`^=` 表示“以...开头”，因此你可以使用这个选择器来为任何以 http:// 开头的链接设置样式。你可以将其用于样式链接到 http://www.google.com 以及链接到 http://www.sawmac.com。换句话说，它选择任何外部链接。

同样地，有时你想选择一个具有以特定值结尾的属性的元素。同样，链接对于此任务非常方便。假设你想在指向 PDF 文件的任何链接旁边添加一个小的文档图标。由于 PDF 文档以 .pdf 结尾，你知道指向这些文件的链接将以 .pdf 结尾，例如：<a href="download_instructions.pdf">。因此，要仅选择这些类型的链接，你可以创建如下的选择器：

```css
a[href$=".pdf"]
```

完整的样式可能如下所示：

```css
a[href$=".pdf"] {
    background: url(doc_icon.png) no-repeat;
    padding-left: 15px;
}
```

不要太担心这个样式中的具体属性，你会在后面的学习中了解到有关 padding 的知识（见第187页）和关于背景图像的知识（见第231页）。只需注意这个很酷的选择器：$= 表示“结尾为”。你可以使用这个选择器来格式化指向 Word 文档（[a href$=".doc"]）、电影（[a href$=".mp4"]）等的链接。

最后，你甚至可以选择具有包含另一个值的属性的元素。例如，假设你喜欢在整个网站上突出显示员工的照片。你可能希望所有这些照片都具有共同的样式，例如厚厚的绿色边框和灰色背景。一个方法是创建一个类样式——例如 .headshot——并手动向相应的 <img> 标签添加一个 class 属性。但是，如果你命名照片是一致的，那么就有一种更快的方法。

例如，假设你在这些图片的名字中都包含单词 headshot——例如，mcfarland_headshot.png、mccord_headshot.jpg、headshot_albert.jpg 等。每个文件中都包含单词 headshot，因此用于插入每个图像的 <img> 标签的 src 属性中也包含单词 headshot。你可以创建一个仅针对这些图像的选择器，如下所示：

```css
img[src*="headshot"]
```

这意味着“选择所有 src 属性中包含单词 headshot 的图像”。这是一种简单、优雅的方式来格式化这些图像。

## Child 选择器

 CSS还包含一些非常具体的伪类，用于选择子元素。它们让你可以为HTML的许多不同排列精细调整选择器。

**:FIRST-CHILD**  

**:LAST-CHILD**  

**:ONLY-CHILD**  

**:NTH-CHILD**  

如果你想选择一系列中每隔三个的子元素，从第二个子元素开始怎么办？例如，假设你想要突出显示每行中的每第三个单元格（`<td>` 标签），从第二个单元格开始（见图3-8）。下面是实现这一效果的样式：

```css
td:nth-child(3n+2) { background-color:#900; }
```

n前面的数字代表倍数：3n表示每隔三个元素，4n表示每隔四个元素，以此类推。加号后跟一个数字（在这个例子中是+2）表示从哪个元素开始，所以+2表示从第二个子元素开始，+5表示从第五个子元素开始。因此，:nth-child(5n+4) 选择的是从第四个子元素开始的每第五个子元素。

你甚至可以使用负的n值，这会倒着循环遍历子元素。例如，图3-7中的最后一个列表使用了以下选择器：

```css
li:nth-child(-n+3)
```

这个选择器表示“从第三个列表项开始，然后选择它之前的每个列表项。”正如你所看到的，`nth-child` 选择器虽然有些令人困惑，但足够强大，可以让你选择各种各样的子元素。

## Child Type Selectors  

CSS 包含一个选择器，它的工作原理与前面部分的子元素选择器类似，但适用于具有特定类型的 HTML 标签的子元素。例如，假设你想以特定方式格式化边栏中的第一个段落，但在某些页面上，该边栏以 `<h2>` 标签开头，而在其他页面上，它以 `<p>` 标签开头。你不能使用 `:first-child` 来选择该段落，因为在某些情况下它是第二个子元素（跟在 `<h2>` 后面）。但是，它总是边栏中的第一个段落（`<p>` 标签），即使在它之前有其他标签，因此你可以使用一个叫做 `:first-of-type` 的类型选择器来选择它。

**:FIRST-OF-TYPE** 

这个选择器的工作原理与 `:first-child` 类似，但适用于具有特定标签的子元素。例如，假设你有一个类为 `sidebar` 的边栏元素。要为该边栏中的第一个段落设置样式，可以使用以下选择器：

```css
.sidebar p:first-of-type
```
注意 `p:first-of-type` 中的 `p`，它表示你要格式化的标签类型。

**:LAST-OF-TYPE** 

这个选择器的工作原理类似于 `:last-child`，但适用于特定类型标签的最后一个实例。例如，如果你想以一种特定的方式格式化边栏 `div` 中的最后一个段落，但不确定段落之后是否还有其他标签（比如一个项目列表、标题或图像），那么可以使用以下样式：

```css
.sidebar p:last-of-type
```

> **注意**：记住，这些类型选择器也必须是特定标签的子元素。所以 `p:first-of-type` 的意思是“第一个子元素是段落标签的元素”。

**:NTH-OF-TYPE**
与 `:nth-child()` 类似，但它应用于具有特定标签的交替子元素。如果你有一个大段文本，其中穿插着图片，你可能会发现这个选择器很有用。`<img>` 标签是一个内联标签，所以你可以在一个 `<p>` 标签中放置一堆 `<img>` 标签。假设你想交替地将图片左浮动和右浮动，可以使用以下两个样式：

```css
img:nth-of-type(odd) { float: left; }
img:nth-of-type(even) { float: right; }
```

### Siblings  

父子关系并不是 HTML 树中唯一的关系。有时候，你需要根据标签周围的兄弟标签来选择一个标签，即共享相同父级的标签。在 HTML 中，紧接在另一个标签之后出现的标签被称为相邻兄弟。在图 3-6 中，`<div>` 标签是 `<h1>` 标签的相邻兄弟，`<p>` 标签是 `<h2>` 标签的相邻兄弟，依此类推。使用相邻兄弟选择器，你可以为每个标题后的第一个段落设置不同的格式，与其后的段落有所区别。假设你想要移除位于该 `<h2>` 标签下方的第一个 `<p>` 标签上方的边距，这样它就直接出现在标题下方而不会有间隙。或者你可能想要给段落设置一个不同的颜色和字体大小，比如一个小的介绍语句。

相邻兄弟选择器使用加号（+）来连接一个元素和它的下一个元素。因此，要选择每个 `<h2>` 标签后的每个段落，可以使用这个选择器：`h2 + p`（空格是可选的，所以 `h2+p` 也可以）。选择器中的最后一个元素（在这种情况下是 `<p>`）将获得格式，但只有当它直接在其兄弟 `<h2>` 之后时才会生效。

还有另一个称为“一般兄弟组合选择器”的兄弟选择器（快三倍说出来）。它简单地使用 ~（波浪号），意思是“选择所有这种类型的兄弟”。例如，虽然 `h2 + p` 选择紧跟在 `<h2>` 标签后面的单个 `<p>` 标签，`h2 ~ p` 则选择所有 `<h2>` 的兄弟（即处于相同层级的）的 `<p>` 标签。说实话，你可能永远不会找到这个选择器的好用之处，但 CSS 绝对是一丝不苟的。

## The :target Selector  

## :not() 选择器  

```css
p:not(.classy) { color: blue; }
```

:not() 选择器存在一些限制：

- :not() 选择器只能与简单选择器一起使用。换句话说，您可以使用元素选择器（例如 html 或 p）、通用选择器（* [参见第 49 页]）、类（例如 .footer）、ID（例如 #banner）或伪类（:hover、:checked、:first-child 等）。因此，以下所有内容都是有效的：
  - .footnote:not(div)
  - img:not(.portrait)
  - div:not(#banner)
  - li:not(:first-child)
- 您不能使用后代选择器（例如 div p a）、伪元素（例如 ::firstline）、组选择器或组合器（例如相邻兄弟选择器 h2 + p）。
- 您不能将多个 :not() 选择器连接在一起。例如，以下内容无效：
  - a[href^="http://"]:not([href*="google.com"]):not([href="yahoo.com"])

换句话说，您只能将 :not() 与一个选择器一起使用一次。

# 第4章 通过样式继承节省时间

## 继承如何简化样式表

## 继承的限制

## 教程：继承

### inheritance Inaction  

Margins, padding, and borders  （以及其他一些属性）不会被继承到子孙标签 - 这正是我们所期望的，正如您将在接下来的例子中看到的那样。

# 第5章 多样式管理：层叠

## How Styles Cascade  

### 继承样式累加

### 最近祖先优先

### 直接应用的样式优先

### 一个标签，多种样式

## 特异性：哪个样式获胜

https://www.w3.org/TR/selectors-3/#specificity

承接您之前的内容，层叠样式表 (CSS) 提供了一套规则，帮助浏览器解决样式冲突。正如您看到的，最具体的样式会优先应用。然而，有时候很难判断哪个样式最具体。幸运的是，CSS 提供了一种计算样式特异性的方法，这个特异性值取决于样式选择器的类型 - 标签选择器、类选择器、ID 选择器等等。下面是如何运作的：

- 标签选择器 (例如 p, h1) 的权重为 1。
- 类选择器 (例如 .text) 的权重为 10。
- ID 选择器 (例如 #unique) 的权重为 100。
- 内联样式 (在 HTML 元素的 style 属性中定义的样式) 的权重为 1000。

**注意**：伪元素（例如 ::first-line）的权重和标签选择器一样，为 1 分。伪类（例如 :link）的权重和类选择器一样，为 10 分。（有关这些伪元素和伪类的更多信息，请参阅第 55 页。）

由于后代选择器通常由几个选择器组成，例如 `#content p` 或 `h2 strong`，因此计算特异性时会稍微复杂一些。后代选择器的特异性等于所列出的所有选择器权重值的总和 (参见图 5-3)。

<img src="CSS The Missing Manual, 4th Edition.2015.08.assets/image-20240512184043919.png" alt="image-20240512184043919" style="zoom:50%;" />

**图3**：当多个样式应用于同一个标签时，网页浏览器需要决定哪个样式在样式冲突的情况下“获胜”。在 CSS 中，样式的“重要性”称为特异性，它由创建样式时使用的选择器类型决定。每种类型的选择器都有不同的权重值，当一个样式中包含多种类型的选择器时（例如后代选择器 `#banner p`），所有使用过的选择器权重值都会被累加计算。

**注意**：继承的属性没有特异性。因此，即使一个标签继承了来自特异性很高的样式（例如 `#banner`）的属性，这些属性也总是会被直接应用于该标签的样式所覆盖。

### 打破平局的关键：后定义的样式获胜

可能会出现两个具有冲突属性的样式具有相同的特异性。（“哦，兄弟，什么时候才能结束？”很快，同志，很快。教程就要来了。）特异性相同时会发生冲突，当在两个地方定义了相同的选择器时。你可能在内部样式表和外部样式表中都定义了<p>标签选择器。或者两个不同的样式可能只是具有相等的特异性值。在发生冲突时，出现在样式表中的最后的样式会胜出。

以下是一个棘手的例子，使用以下HTML：
```html
<p class="byline">Written by <a class="email" href="mailto:jean@cosmofarmer.com">Jean Graine de Pomme</a></p>
```
在包含上述段落和链接的页面的样式表中，你有两个样式：
```css
p .email { color: blue; }
.byline a { color: red; }
```
这两个样式的特异性都是11（类名的10加上标签选择器的1），并且两者都适用于<a>标签。这两个样式是相等的。在上面的段落中，浏览器使用哪种颜色来着色链接？答案：红色，因为它是样式表中的第二个（也是最后一个）样式。

现在假设这两个样式的位置互换，样式表如下所示：
```css
.byline a { color: red; }
p .email { color: blue; }
```
在这种情况下，链接将是blue的。由于在样式表中，`p .email`出现在`.byline a`之后，因此它的属性胜出。

如果在外部样式表和内部样式表中存在冲突的规则会发生什么呢？在这种情况下，你在HTML文件中放置样式表的位置就变得非常重要了。如果你首先使用<style>标签（第25页）添加了一个内部样式表，然后在HTML中更下方使用<link>标签（第26页）附加了一个外部样式表，那么外部样式表中的样式会胜出。（实际上，这是同样的原理：出现在最后的样式会胜出。）最重要的一点是：在放置外部样式表时要保持一致。最好首先列出任何外部样式表，只有在确实需要一个或多个样式应用于单个页面时才使用内部样式表。

### 提升特异性

CSS提供了一种完全提升特异性的方法。当你确实、绝对地想要确保某个属性不会被更具体的样式覆盖时，你可以使用这个技巧。只需在任何属性后面插入!important即可。

例如，考虑以下两种样式：

```css
.nav a { color: red; }
a { color: teal !important; }
```

通常情况下，一个具有.nav类的元素内部的链接会变成红色，因为.nav a样式比a标签样式更具体。

然而，在属性值后面包含!important意味着该属性始终胜出。因此，在上面的例子中，页面上的所有链接——包括那些在具有nav类的元素内部的链接——都是teal。

请注意，!important作用于单个属性，而不是整个样式，因此你需要在希望保护的每个属性的末尾添加!important。最后，当两个样式都对同一属性应用了!important时，更具体的样式的!important规则会胜出。

使用!important时要小心。因为它非常强大，如果你过于频繁地使用它，你的样式就不会遵循层叠的正常规则，导致“!important军备竞赛”的升级。换句话说，为了克服一个样式中!important的影响，你可能会在另一个样式中添加另一个!important；然后为了克服第二个!important属性，你可能需要在另一个样式中的相同属性上再次添加!important。因此，尽量不要频繁使用!important，而且在使用之前，尽量想想是否有其他方法来解决冲突：重命名或重新排列样式表中的样式可能就足够了。

## 控制级联

正如你所看到的，创建的 CSS 样式越多，格式化问题的潜在可能性就越大。例如，你可能创建了一个类样式，指定了特定的字体和字号，但是当你将该样式应用于段落时，却没有任何效果！这种问题通常与级联有关。即使你认为直接将类应用于标签应该应用类的格式属性，但如果存在更具体的样式，则可能不会。
对于这种问题，你有几种处理方法。首先，你可以使用 !important（如上方的说明框所述）确保属性始终适用。不过，使用 !important 方法有点过于粗暴，因为很难预测将来是否会需要覆盖 !important 属性。接下来介绍另外两种调整级联的解决方案。

### 改变特异性

图5-4中的顶部图片展示了一个特定标签样式在级联游戏中失败的例子。幸运的是，大多数情况下，你可以轻松地改变其中一个冲突样式的特异性，而将 !important 保留给真正的紧急情况。在图5-4（顶部）中，有两个样式格式化了第一个段落。类样式——.intro——不如 #sidebar p 样式具体，所以 .intro 的属性不会应用于段落。为了增加类的特异性，将ID名称添加到样式中：#sidebar .intro。

然而，简单地添加额外的选择器使样式的属性“胜出”可能会导致所谓的特异性之争，最终导致样式表包含非常长而复杂的样式名称，例如：#home #main #story h1。实际上，正如你将在第108页阅读到的那样，你应该尽量避免这些类型的样式，并且应该将选择器保持尽可能简短。

### 选择性地覆盖

### Avoiding Specificity Wars  

### 从零开始  

为了避免跨浏览器的不一致性，最好从一个干净的样式表开始。换句话说，清除内置的浏览器格式并提供自己的样式。清除浏览器样式的概念称为 CSS 重置。本节将为你提供一个实用的介绍。

特别是，在你的样式表的顶部应该包含一组核心样式。这些样式为一些常见的属性设定了一个基准，因为这些属性在不同的浏览器中通常会被不同地处理。

http://meyerweb.com/eric/tools/css/reset  

**注意**：你不必自己键入所有这些代码。在 05 教程文件夹中你会找到一个名为 reset.css 的文件，其中包含了一个基本的 CSS 重置文件。只需将这个文件中的样式复制粘贴到你自己的样式表中。另一种重置样式的方法是使用 normalize.css，这是一个免费、开源的样式表，它使不同的浏览器以一致的方式显示相同的标签。它被许多网页设计师广泛使用。你可以在这里找到它：[http://necolas.github.io/normalize.css/](http://necolas.github.io/normalize.css/)。

## 教程：层叠样式表的实际应用

### 解决冲突

```css
.main p {
  color: #616161;
  font-family: "Palatino Linotype", Baskerville, serif;
  font-size: 1.1em;
  line-height: 150%;
  margin-bottom: 10px;
  margin-left: 80px;
}
p.intro {
  color: #6A94CC;
  font-family: Arial, Helvetica, sans-serif;
  font-size: 1.2em;
  margin-left: 0;
  margin-bottom: 15px;
}
```

确保在 p 和 .intro 之间没有空格。你基本上创建了一个平局——.main p 是一个类和一个标签选择器，而 p.intro 是一个标签和一个类。它们的特异性值都是 11，但因为 p.intro 出现在 .main p 后面的样式表中，它赢得了这场比赛，其属性应用于段落。（你可以创建一个更具体的样式——.main .intro——来解决冲突。）

# 第6章 文本格式化

## 使用 web 字体

### 使用 @font-face 指令

```css
@font-face {
  font-family: "League Gothic";
  src: url("fonts/League_Gothic-web font.woff");
}
```

第一个属性是 `font-family`，你之前见过，但这里它有一个不同的用途。当在 `@font-face` 指令中使用时，`font-family` 会为字体分配一个名称。然后，当你想将该字体应用于某个样式时，就使用这个字体名称。例如，假设你想对页面上的所有段落使用 League Gothic 字体。你可以使用如下样式：

```css
p {
    font-family: "League Gothic";
}
```

**注意**：你希望使用的每种字体都需要一个 `@font-face` 指令。如果你有三种字体——例如字体的常规、斜体和粗体版本——你需要三个 `@font-face` 指令。最好将它们分组放在样式表的顶部，这样浏览器可以立即开始下载它们。

例如：

```css
@font-face {
    font-family: "League Gothic";
    src: url("league-gothic-regular.woff2") format("woff2");
}

@font-face {
    font-family: "League Gothic Italic";
    src: url("league-gothic-italic.woff2") format("woff2");
}

@font-face {
    font-family: "League Gothic Bold";
    src: url("league-gothic-bold.woff2") format("woff2");
}
```

这样浏览器在解析样式表时会立即开始下载这些字体文件，提高页面的加载速度和用户体验。

### 使用 web 字体创建样式

**提示**：你也可以在网页上使用包含符号和图标的字体。因此，与其创建一个警告标志的图形并将其放入文本段落中，不如使用 `@font-face` 指令加载包含警告标志图标的字体，并只使用一个简单的字母（在字体中映射到该图标）。然而，在使用图标字体之前，你可能想要查看大量实际上是图形图标的 Unicode 符号，或者使用 SVG（可缩放矢量图形）来显示图标。你可以在 [这里](https://developers.google.com/web/fundamentals/media/images/use-icons?hl=en) 了解更多关于这些选项的信息。

## 探索 Google Web Fonts

## 给文本添加颜色

## 改变字体大小

### 使用像素

```css
font-size: 36px;
```



### 使用关键字，百分比和 Ems  

在大多数浏览器中，非标题标签内的文本显示高度为16像素，这被称为基准文本大小。

#### 关键字

#### 百分比

像关键字一样，百分比值会根据浏览器定义的字体大小调整文本大小，但它们比仅仅使用大号、超大号等提供了更精细的控制。每个浏览器都有一个预设的基准文本大小，在大多数浏览器中是16像素。你可以在浏览器的偏好设置中调整这个基准大小。无论选择了什么设置，特定浏览器的基准文本大小相当于100%。换句话说，对于大多数浏览器，将CSS百分比设置为100%等同于将其设置为16像素。

比如说，你想让页面上某个特定的标题显示为平均文本大小的两倍。你只需将字体大小设置为200%，如下所示：

```css
 font-size: 200%; 
```

或者，当你想要文本比默认大小稍小时，可以使用90%这样的值来稍微减小字体大小。

以上示例相当直接，但接下来有点棘手：

字体大小是一个继承属性（如第4章所讨论），因此具有指定字体大小的标签内的任何标签都会继承那个字体大小。因此，100%的确切大小可能会因为标签继承了font-size值而改变。

例如，在图6-11的左下角，有一个<div>标签，其字体大小被设置为200%。这是浏览器基准文本大小的两倍，即32像素。所有在这个<div>内的标签都继承了那个文本大小，并将其作为计算它们文本大小的基础。换句话说，对于<div>内的标签，100%是32像素。因此，<div>内具有100%字体大小的<h1>标签显示为页面基准文本大小的两倍，即32像素。

#### EMS

一旦你理解了百分比，你就完全理解了 em 单位。这两者的工作方式完全相同，但许多网页设计师更喜欢使用 em，因为它在排版学中有其根源。

em 这个词源自纸质排版领域，在那里的意思是特定字体中大写字母 M 的大小。当它被引入到网页设计中后，em 在 CSS 中的含义发生了变化。可以将其视为指代基础文本大小。也就是说，1em 的值与 100% 的值相同，正如前一节所述。你甚至可以反过来说：百分比值只是 em 乘以 100 的结果：0.5em 是 50%，0.75em 是 75%，3em 是 300%，等等。

例如，以下 CSS 与 `font-size: 200%;` 做的完全相同：

```css
font-size: 2em;
```

当涉及到继承时，ems 的工作方式与百分比值完全相同（见图 6-11 的右上角示例）。底部的段落设置为 .75em，由于 `<p>` 标签继承了 `<div>` 标签的 2em（32px）设置，结果是 .75 x 32，即 24 像素。在 `<p>` 标签内部还有两个其他标签，它们也设置了 .75em 的字体大小。最内层的标签 `<strong>` 被设置为 .75em，或者本质上是其继承大小的 75%。这里涉及到很多数学计算：32 像素（从 `<div>` 标签继承）x .75（从 `<p>` 标签继承）x .75（从 `<em>` 标签继承）x .75（`<strong>` 标签自身的字体大小）。这个脑筋急转弯的结果是大约 14 像素的文本大小。

继承的字体大小值可能会导致嵌套列表出现问题。你可以在图 6-11 的右下角看到一个例子。如果你创建一个样式，比如 `ul { font-size: 75%; }`，那么嵌套列表（一个 `<ul>` 标签内部包含另一个 `<ul>` 标签）将被设置为 75% 的 75% ——这使得嵌套列表中的文本比列表的其余部分小。为了避免这个难题，可以创建一个额外的后代选择器样式，如下所示：`ul ul { font-size: 100%; }`。这个样式将任何在 ul 内部的 ul 标签的字体大小设置为 100%；换句话说，就是周围 ul 标签字体大小的 100%。在这个例子中，它保持了任何嵌套列表为基础文本大小的 75%。还有另一种方法可以防止这种无限递归的缩小文本效果：使用 rem 单位（将在下一部分讨论）。

#### REMS  

CSS 包含另一种测量单位，称为 rem。它不是以睡眠模式或乐队命名的，而是代表根 em（root em）——这意味着其值是基于根元素的文本大小。在大多数情况下，这只是意味着基础文本大小，因此你可以将图 6-11 中的 .75em 改为这样：

```css
font-size: .75rem;
```

这种样式将字体大小设为基础文本大小的 .75，而不是继承的字体大小（如 ems 的情况）。HTML 中的根元素实际上是你在网页开头找到的 html 元素。当使用 rem 值时，你可以设置 html 元素的基础文本大小，然后使用 rem 单位将文本大小设置为相对于该大小。例如，你可以这样将基础文本大小设置为 20 像素：

```css
html {
    font-size: 20px;
}
```

使用 rem 单位，可以确保文本大小始终相对于根元素的文本大小，无论嵌套层次如何。这使得管理和维护一致的文本大小变得更加容易。

然后使用 rem 单位根据这个 20 像素的基础文本大小来创建字体。例如，要使所有段落的字体大小为 15 像素，可以添加以下样式：

```css
p {
    font-size: .75rem;
}
```

rem 单位避免了与继承的百分比和 em 字体大小相关的问题。百分比和 em 是基于其父元素的字体大小。应用于多个嵌套元素的百分比字体大小会复合，使每个连续的字体大小成为前一个元素字体大小的百分比。然而，rem 单位始终基于 html 元素的字体大小；换句话说，rem 在嵌套在继承不同字体大小的元素内时始终是相同的值。

你应该注意，虽然大多数浏览器现在都支持 rem 单位，但 Internet Explorer 8 及更早版本并不支持。

**提示**：可以通过多种方式让页面上的文字突出。将某些单词的字体设置得比其他单词大，或者使某些文字更暗、更亮或更明亮，可以在视觉上将它们与周围的文本区分开来。对比是优秀图形设计的最重要原则之一；它可以帮助突出重要信息，引导读者的眼睛浏览页面，并通常使页面更易于理解。关于排版对比的快速概述，请查看此页面：[Seven Principles of Typographic Contrast](https://www.creativepro.com/article/dot-font-seven-principles-of-typographic-contrast)。

## 格式化单词和字母

### Capitalizing

# 第8章 向网页添加图形

## 添加背景图

```css
url(../images/bg.png) /* document-relative */
url(/images/bg.png) /* root-relative */
```

正如第237页上的信息框所解释的那样，文档相对路径提供的方向是相对于样式表文件而言，而不是您正在样式化的HTML页面。

## 定位背景图

### 使用百分比值

最后，您可以使用百分比值来定位背景图像。以这种方式使用百分比有些棘手，如果您可以使用之前讨论过的关键字或精确值实现您想要的效果，那么请使用它们。但是，如果要将元素定位在与元素宽度成比例的位置上，比如说，如果您想要将图形放在标题的四分之三处，而您不知道元素的宽度，则必须使用百分比。

与像素或em值一样，您提供两个百分比值：一个用于指示水平位置，另一个用于指示垂直位置。百分比值测量的是一点棘手的：简而言之，百分比值将图像的指定百分比与样式化元素的相同百分比对齐。什么意思？

该声明将图像上距其左边缘50%的点直接放置在距页面左边缘（或您已用背景图像进行样式化的任何元素）50%的点上。该声明还将图像上距其顶部50%的点与页面或样式化元素顶部50%的点对齐。换句话说，图像的中心与元素的中心对齐。这意味着在使用百分比时，正在对齐的图像上的确切点可能是一个移动目标。（这是因为如果您的访问者调整其浏览器的大小，您样式化的元素的定位百分比可能会改变。）

### 固定图像的位置

```css
body {
    background-image: url(images/logo.gif);
    background-repeat: no-repeat;
    background-attachment: fixed;
}
```

### 定义背景的原点和裁剪

您可以使用 background-origin 属性重新定位图像的起始点。

background-clip 属性限制了背景图像出现的区域。

### 背景图像的缩放

通常，放置在页面元素背景中的图像会以您创建的大小显示。然而，background-size 属性允许您控制背景图像的大小。您可以使用值或关键字来设置大小：

• 提供一个高度和宽度值来设置图像的大小。您可以使用像素值这样的绝对值：

```css
background-size: 100px 200px;
```

这段代码将背景图像设置为100像素宽，200像素高。

您还可以仅设置宽度或高度的值，并将另一个值设置为 auto：

```css
background-size: 100px auto;
```

在这种情况下，背景图像的宽度为100像素，浏览器会自动设置高度以保持图像的纵横比不变（以防止图像失真）。您也可以使用百分比值。如果您希望图像完全适应背景，则可以对两个设置都使用100%（见图8-11，左侧）：

```css
background-size: 100% 100%;
```

• contain 关键字强制图像调整大小以适应页面元素的背景空间，同时保持图像的纵横比（见图8-10，中间）。根据图像和元素的形状，图像被拉伸以适应元素的宽度或高度。

```css
background-size: contain;
```

• cover 关键字强制图像的宽度适应元素的宽度，图像的高度适应元素的高度，而不改变图像的纵横比（见图8-1，右侧）。

```css
background-size: cover;
```

几乎总是通过 background-size 属性调整原始图像大小：如果图像小于元素，则浏览器会将图像放大，通常导致图像出现明显的像素化和降级（如图8-12中的背景图像）。

**提示：**
在处理使用百分比大小的元素时，使用 background-size 属性尤其有帮助，比如在第14章中讨论的响应式设计中。例如，如果您将一个图像放入一个横幅的背景中，在桌面监视器上查看时它是960像素，但在手机上查看时缩小到480像素，您可以使用以下设置：

```css
background-size: 100% auto;
```

这会强制网络浏览器调整图像大小，使其适应横幅缩小到较窄的尺寸。

**为背景图像带来特效**

如果您是像 Photoshop 这样的照片编辑软件的高级用户，您可能已经研究过混合模式，它可以让您转换两个图层在视觉上的交互方式。这里是它们的工作原理的示例：想象一下，您在一个元素的背景中放置了一张照片。您还为该元素设置了背景颜色。通常，任何没有透明度的图像都会覆盖在背景颜色之上。但是，如果您能够将图像和背景混合在一起会怎么样呢？例如，假设您想让背景颜色透过图像的白色部分显示出来。相对较新的 background-blend-mode 属性允许您做到这一点。您可以将该属性应用于具有背景颜色和图像的元素。该属性采用了 16 种不同的混合模式值之一，每种模式对混合物具有不同的效果。在另一个例子中，假设您有一张番茄的照片放在一个 div 的背景中，并且您希望橙色混合到照片中。您可以将背景颜色设置为橙色，然后设置混合模式如下：

```css
background-image: url(tomato.png);
background-color: orange;
background-blend-mode: screen;
```

您甚至可以在多个图像背景上使用混合模式（参见第249页）来创建一些非常有趣的视觉效果。
要了解混合模式在 Photoshop 中的工作原理，请查看 www.youtube.com/watch?v=Bnl1CJV17q4 的视频。尽管此视频是关于 Photoshop，但它们与 CSS 的 background-blend-mode 属性具有相同的混合模式和相同的效果。
要了解混合模式在 CSS 中的工作原理的视觉演示，请访问 http://sarasoueidan.com/blog/compositing-andblending-in-css/。（目前，Internet Explorer 的任何版本都不支持此属性。）

## Using Background Property Shorthand  

以下样式在页面中央添加了一个图形，将图像调整为其大小的50%，只放置一个图像（不重复），将图像固定在位置（因此如果页面滚动，图像将保持固定），并将背景颜色设置为白色：

```css
body {
    background: url(bullseye.gif) center center / 50% no-repeat fixed #FFF;
}
```

如果您指定了位置（例如，上面直接的代码示例中的 center center）和 background-size 属性（例如示例中的50%），则用斜杠（/）分隔它们。

## 使用多个背景图像

幸运的是，您可以向元素的背景中添加多个图像。在滚动示例中，您可以使用三个背景图像：一个用于滚动的顶部，一个用于滚动的底部，一个用于其文本区域。最后一个图像是一个无缝平铺的图像，因此当侧边栏变得更高时，图像会简单地平铺以适应空间。

当像这样使用多个值时，第一个值（在本例中是 no-repeat）与 background-image 属性中列出的第一个图像（scrollTop.png）配对；第二个值与第二个列出的图像配对，依此类推。由于这可能会很快让人感到困惑，许多网页设计师使用速记方法来指定多个图像，如下所示：

```css
background: url(scrollTop.jpg) center top no-repeat,
            url(scrollBottom.jpg) center bottom no-repeat,
            url(scrollMiddle.jpg) center top repeat-y;
```



## 教程：创建一个相册

```css
figure {
  display: inline-block;
  vertical-align: top;
  width: 210px;
  margin: 0 10px 10px 10px;
}
```

display: inline-block 属性（第192页）将每个图像/标题对视为块（具有高度和宽度的框），但同时也视为内联元素（因此这些块可以并排）。此外，设置为 top 的 vertical-align 属性确保每个 <figure> 标签与同一行中的所有其他 <figure> 标签顶部对齐。

## 教程：使用背景图像

1. 返回文本编辑器和 styles.css 文件。定位您在第272页步骤7中添加的 .announcement 样式，并添加一个额外的属性：

```css
.announcement {
    background: url(images/scroll_top.jpg) no-repeat center top,
                url(images/scroll_bottom.jpg) no-repeat center bottom,
                url(images/scroll_middle.jpg) repeat-y center top;
    margin-top: 115px;
}
```

是的，这只是一个属性 - background 属性 - 但它包含了三个不同的图像。您列出这些图像的顺序很重要，因为它们会堆叠在一起。在这种情况下，第一个图像是滚动的顶部；它只出现一次（no-repeat），在顶部和中心。第二个图像是滚动的底部；它也只出现一次，但在 div 的底部。最后，滚动的中间部分 - scroll_middle.jpg - 将位于其他两个图像的下面（因为它在列表中出现在最后），并且沿着 y 轴（上下）重复，因此如果 <div> 变得更高，图像将简单地平铺以填充空间。 
如果您预览页面，您会看到一些问题。首先，文本出现在卷起的滚动顶部和底部的顶部。稍微增加一点填充就可以解决这个问题。

# 第10章 CSS 变换、过渡和动画

## Transforms  

缩放还提供了另一个视觉效果：可以将元素上下翻转和左右反转。虽然没人确定W3C使用了哪个数学分支来设计这个系统，但如果您在`scale`  属性中使用负数，您实际上就可以将元素翻转过来。例如，这是如何将元素上下翻转和左右反转的代码：

```css
transform: scale(-1);
```

这会产生图10-4中左侧所示的图像。您也可以只在一个轴上翻转元素。在图10-4中的中间图像中，图像仅在水平轴上翻转。沿着垂直轴翻转元素会产生中间图像：

```css
transform: scale(-1, 1);
```

这会产生一个像镜子靠在元素一侧的效果，或者像您翻转了元素并从其背面看过去。多有趣啊！

### Translate

```css
transform: translateY(-.5em);
```

### Skew  



**提示**：访问 http://westciv.com/tools/transforms/index.html 来使用一个在线工具，可视化 CSS 变换。

### Origin  

通常情况下，当您对一个元素应用变换时，Web 浏览器会将元素的中心作为变换点。然而，CSS 允许您更改这个变换点，使用 transform-origin 属性。它的工作方式类似于 background-position 属性（见第 236 页）；您可以提供关键字值、像素的绝对值，以及 ems 和百分比的相对值。

### 3D变换

CSS 还提供了一种更复杂的变换类型。
3D 变换可以让您在显示器、平板电脑或手机的平面屏幕上模拟三维空间。
要了解关于3D变换的简短介绍，请访问 http://coding.smashingmagazine.com/2012/01/06/adventures-in-thethird-dimension-css-3-d-transforms/ ，如果您需要更详细的解释和大量示例，请查看 http://desandro.github.io/3dtransforms/ 。要查看一些3D变换的精彩示例，请访问以下网站：

- 苹果的“Morphing Power Cubes”页面（www.webkit.org/blog-files/3d-transforms/morphing-cubes.html），这是3D变换威力的最初示例之一，演示了一个旋转的立方体，您可以将其变成旋转的一组瓷砖。

- 这是一个3D“翻转”效果的示例：http://davidwalsh.name/css-flip —— 一个动画效果，看起来像是翻转一张卡片以显示其背面。

## Transitions

虽然变换可以很有趣（特别是旋转函数），但当与 CSS 过渡结合使用时，它们确实可以使您的页面生动起来。过渡简单地是从一组 CSS 属性到另一组 CSS 属性在特定时间内的动画。例如，您可以使横幅在两秒内旋转 360 度。

### Adding a Transition  

```css
.navButton {
    background-color: orange;
    transition-property: background-color;
    transition-duration: 1s;
}

.navButton:hover {
    background-color: blue;
}
```

```css
transition-timing-function: ease-in-out;
```

### 延迟过渡的开始

```css
transition-delay: .5s;
```

**提示**

通常情况下，你会将过渡属性放在起始样式中（例如，.navButton 在第331页），而不是最终样式（.navButton:hover）。然而，这里有一个用于 CSS 下拉菜单的技巧（见第296页上的框）。在 CSS 中，下拉菜单的一个问题是，如果你意外地将鼠标移出菜单，菜单通常会很快消失。然而，你可以通过使用 transition-delay 属性来使菜单出现很快，但消失很慢。为此，你可以将以下代码添加到原始样式中：

```css
transition-delay: 1s;
```

然后在 :hover 样式中去掉延迟：

```css
transition-delay: 0;
```

这看起来有些反直觉，但这段代码基本上使 :hover 过渡立即发生，没有延迟。但是返回到正常样式（菜单消失）需要1秒钟。在这段时间内，访问者有足够的时间将他的错误鼠标移到菜单上，使其不会消失。

### Transition Shorthand  

```css
transition: all 1s ease-in .5s;
```

### 实现更流畅的动画

在网页中同时对许多不同的属性进行动画化可能会影响浏览器的性能。无论您是使用 CSS 过渡还是 CSS 动画，浏览器都需要做大量工作来动画化 CSS 属性的变化。同时进行的太多动画和过渡可能会使浏览器变得很慢，甚至崩溃。这在移动设备和平板电脑上尤为明显，因为它们的CPU比台式机和笔记本电脑的CPU慢得多。

然而，有四种属性可以在不消耗太多CPU资源的情况下进行动画：opacity（不透明度）（见第671页），以及 transform 属性的 translate、scale 和 rotate 选项（见第319页）。这四种属性比其他 CSS 属性更有效地处理，因此您使用它们创建的任何过渡或动画都会更加流畅。关于技术细节，可以参考：http://www.html5rocks.com/en/tutorials/speed/high-performance-animations/。

此外，您还可以强制浏览器将动画移动到计算机的 GPU（图形处理单元）。GPU 是非常快速的计算机，它们可以比计算机的 CPU 更快地执行特定类型的计算。您可以通过在样式中添加 3D 变换属性来欺骗浏览器将样式交给 GPU 处理。例如，如果您计划在访问者将鼠标悬停在元素上时，为元素的背景色添加动画效果，您可以使用原始背景色创建样式，如下所示：

```css
.highlight {
    background-color: rgb(231, 0, 23);
    transition: background-color 1s;
    transform: translateZ(0);
}

.highlight:hover {
    background-color: rgb(0, 0, 255);
}
```

transform: translateZ(0) 这一行在视觉上并没有任何作用。它告诉浏览器沿着三维 Z 轴移动元素 0 像素；换句话说，根本不移动它。然而，由于它使用了一个 3D 变换，浏览器将此样式交给 GPU 处理。结果是，由于 GPU 的更强大的性能，动画可能会显得更流畅。

但是，在您开始在每个样式上都添加 transform: translateZ(0) 之前，请注意 GPU 只能处理有限数量的内容，过多的可视效果会使浏览器变得极慢。

此外，过多的动画和过渡可能会对页面的性能产生非常负面的影响，尤其是在移动设备上。请确保在多个浏览器和移动电话上测试所有的过渡和动画效果，以确保您的页面正常运行。

## 动画

CSS提供了另一种更丰富的机制来创建动画。使用CSS过渡，您只能从一组CSS属性过渡到另一组。CSS动画可以让您从一组属性过渡到另一组属性，然后再到另一组属性，以此类推。此外，您可以使动画重复播放，在访问者将鼠标悬停在动画上时暂停，甚至在动画达到结束时反向播放。

### 定义关键帧

```css
@keyframes animationName {
    from {
        /* list CSS properties here */
    }

    to {
        /* list CSS properties here */
    }
}
```

**注意**：@keyframes 不是一个 CSS 属性，而是一个称为 at 规则（at rule）的东西。CSS 中的其他 at 规则包括 @import 语句，用于从另一个样式表加载外部样式表，以及 @media 用于定义不同媒体类型（如打印机或不同的屏幕尺寸和分辨率）的样式（见第465页）。

```css
      @keyframes fadeIn {
        from {
          opacity: 0;
        }

        to {
          opacity: 1;
        }
      }
```

```css
      @keyframes backgroundGlow {
        from {
          background-color: yellow;
        }

        50% {
          background-color: blue;
        }

        to {
          background-color: red;
        }
      }
```

```css
      @keyframes glow {
        from {
          background-color: yellow;
        }

        25%,
        75% {
          background-color: blue;
        }

        to {
          background-color: red;
        }
      }
```

注意第5行中的 25% 和 75%。这意味着在动画进行到 25% 的时候，元素的背景颜色应该是蓝色。然而，在动画进行到 75% 的时候，背景颜色也应该是蓝色。换句话说，在 25% 到 75% 的时间段内，背景将保持为纯蓝色，最后才变为红色。如果这个动画持续了4秒，那么在动画的中间2秒中，元素的背景将保持为纯蓝色。

### 应用一个动画

344

### 暂停一个动画

CSS还包含另一个动画属性——animation-play-state——用于控制动画的播放状态。它只接受两个关键字之一：running 或 paused。要暂停一个动画，只需将该声明应用到一个样式上：

```css
animation-play-state: paused;
```

然而，真正通过 CSS 应用它只有一种方式——伪类。与过渡一样，您需要某种触发器来暂停动画。一种方法是在访问者将鼠标悬停在动画上时暂停任何动画。下面是一个使用 .fade 类样式的示例：

```css
.fade {
    animation: fadeOut 2s ease-in-out 2 alternate 5s forwards, glow 5s;
}
```

这段代码在任何应用了 fade 类的元素上运行两个动画——fadeOut 和 glow。假设你想让访问者通过简单地将鼠标悬停在上面来暂停这个动画。您只需要再添加一个样式：

```css
.fade:hover {
    animation-play-state: paused;
}
```

## 教程

# 第17 章 现代网页布局中使用 Flexbox

## 介绍 Flexbox

```css
.container div:nth-of-type(1n+2) {
    margin-left: 20px;
}
```

这个 nth-of-type 选择器（第 66 页）简单地选择从第二个 div 开始的每个 div，并将其左边距设置为 20 像素（这个巧妙的技巧确保第一个 div 不会从容器边缘向右缩进 20 像素）。这导致了图 17-2 中的底部图片。

从概念上讲，flexbox 相当简单。正如你所看到的，要实现这种效果并不需要太多的 CSS。最重要的是，你不必担心项目会从容器中溢出，就像使用浮动元素时那样（第 405 页），而且你可以轻松创建等高的列。唯一让 flexbox 变得困难的是理解大量的 flexbox 属性，并想象所有这些属性的几乎无限组合。

## Flex 容器属性

### Flex-Flow  

**注意**：

flex-flow 属性是另外两个与 flex 相关的 CSS 属性的简写：flex-direction 和 flex-wrap。例如

等同于
flex-direction: row;
flex-wrap: wrap;
因为 flex-flow 需要的代码更少，所以在本书中推荐使用这种方法。

535

```css
flex-flow: row wrap;
```

等同于

因为 flex-flow 需要的代码更少，所以在本书中推荐使用这种方法。

```css
flex-direction: row;
flex-wrap: wrap;
```

因为 flex-flow 需要的代码更少，所以在本书中推荐使用这种方法。

### Justify-content  

justify-content 属性确定了浏览器应该如何在行内放置 flex 项目。该属性仅在 flex 项目具有设置的宽度，并且项目的总宽度小于 flex 容器的情况下才有效。如果你正在使用 flex 宽度（第 546 页）来设置 flex 项目，那么 justify-content 属性将不起作用。该属性有五个可能的值：

flex-start  

flex-end  

center  

space-between   

space-around  

### Align-items  

• flex-start 将所有 flex 项目的顶部与容器的顶部对齐（图 17-6 中的＃1）。
• flex-end 将所有 flex 项目的底部与容器的底部对齐（图 17-6 中的＃2）。
• center 将所有 flex 项目的垂直中心与容器的垂直中心对齐（图 17-6 中的＃3）。
• baseline 将每个 flex 中的第一个元素的基线与容器的基线对齐（图 17-6 中的＃4）。
• stretch 是 flex 项目的正常行为。它将容器中的每个项目拉伸到相同的高度（图 17-6 中的＃5）。这是使用其他 CSS 技术特别难以实现的效果。

### Align-content  

你可以应用到 flex 容器上的最后一个属性是 align-content。该属性决定了浏览器如何放置跨越多行的 flex 项目。该属性仅在两个条件为真时起作用：首先，flex 容器必须启用换行（页面 532）；其次，flex 容器必须比 flex 项目的行更高。换句话说，容器内必须有比项目行的总高度更多的额外垂直空间。这种情况并不常见，但你可能会在某个时候需要它。

## Flex Item 的属性

### Order  属性  

这种方法的问题在于，第一个侧边栏——可能包含了导航、笔记，甚至广告——出现在文件的源顺序中的第一位。这意味着当谷歌的搜索蜘蛛访问页面时，它们必须先通过大量的侧边栏内容，才能到达页面的核心部分——第二个 div 中的主要内容。此外，视觉障碍网民使用的屏幕阅读器也必须在到达主要文章之前，爬过这堆附属内容。

有一些巧妙的方法可以解决这个问题，比如使用负边距值将列移动到新的顺序中，但它们都是一些需要精确的 CSS 的技巧。应该有更好的方法。确实有一个，感谢 flexbox。order 属性允许你为 flex 项目分配一个数值，该数值决定了该项目在行（或列）中的出现顺序。HTML 源顺序一点都不重要：你可以使 HTML 的最后一个块首先出现在行中，或者将第一个块放在最后（见图 17-8，底部）。

### Align-self  

align-self 属性与用于 flex 容器的 align-items 属性的工作方式相同。然而，align-items 应用于容器中的所有 flex 项目，而 align-self 应用于单个 flex 项目。你将该属性应用于项目（而不是容器），它会覆盖 align-items 属性的任何值。换句话说，你可以将容器内的所有 flex 项目对齐到容器顶部，但只有一个项目对齐到底部。
align-self 的可能值与 align-items 相同（见第 537 页），产生相同的效果，但仅适用于单个 flex 项目（见图 17-9）。

### Mini-Tutorial: Auto Margins for Flex Items  

```css
.logo {
  margin-right: auto;
}
```

对于 flex 项目，自动外边距告诉浏览器根据可用空间自动设置外边距大小。在这种情况下，logo 和三个导航按钮没有填满整个横幅，因此给 logo 设置一个自动右外边距告诉浏览器使用横幅内的任何空白空间，并将其放置在 “Our Company” 的右侧。这会将导航按钮推到横幅的另一侧。太神奇了！
完成的横幅应该像图 17-10 中的底部图像一样。你也可以通过将自动值分配给第一个按钮的左外边距来实现相同的效果。这样会在第一个按钮的左侧添加所有可用的空间，从而将所有其他按钮推到右侧。

### Flex  

你已经学会了很多基本属性，但是 flex 属性是使 flexbox 具有灵活性的关键。这个属性是控制 flex 项目宽度的关键，它让你可以轻松地创建可以“伸缩”的列，即使容器的大小是未知的或动态的也能够自适应调整宽度。

通过 flex 属性，你可以以更少的时间和更少的数学知识创建响应式的网页设计，就像你在第15章中所学到的那些设计一样。

你提供给 flex 的第一个值是一个数字，表示该 flex 项目的相对宽度。(One value, unitless number: flex-grow)

你可以为 flex 属性设置的第二个值也是一个数字，但它表示的是 flex-shrink 属性。

最后一个值是 flex-basis 属性，它为 flex 项目设置了基础宽度。你可以使用绝对值，如 100px 或 5em，也可以使用百分比值，如 50%。你可以把 flex-basis 值看作是 flex 项目的最小宽度。当你设置了 flex-basis 值时，它会为该项目设置一个宽度，但根据其他 flex 设置，该 flex 项目可能会变得比 flex-basis 值更大（或更小）。

### Wrapping Flex Items  

### The Bottom Line  

```css
.container {
    display: flex;
    flex-flow: row wrap;
}

.sidebar1 {
    flex: 1 1 100px;
}

.sidebar2 {
    flex: 1 1 100px;
}

.main {
    flex: 2 1 200px;
}
```

为了保持 flex 项目彼此之间的比例大小，确保你的 flex-basis 值——即 flex 项目的基础宽度——与它们的 flex-grow 值共享相同的比例（上图）。
如果它们不共享，那么你将无法准确地为行中 flex 项目的宽度设置一致的比例，就像下图中所示的那样。

## 教程：构建 Flexbox 布局

### Adding Three Columns  

```css
.boxes .more {
	margin-top: auto;
}
```

每个按钮都应用了more类，因此这个选择器选择了列内的按钮。上边距设置为auto，告诉浏览器在按钮顶部之上自动添加剩余的空白空间。这个自动边距的效果是将所有按钮推到每列的底部（见图17-19，底部）。

### Formatting the Footer  

```css
.signup input[type="email"] {
  border-radius: 4px 0 0 4px;
  -webkit-flex: 1;
  flex: 1;
}
.signup input[type="submit"] {
  border-radius: 0 4px 4px 0;
  padding: 0 10px;
}
```

这些规则使用属性选择器（见第59页）来识别用于接收用户电子邮件地址的文本字段和用于提交表单的按钮。将电子邮件字段的flex值设置为1意味着该字段将扩展以填充所有未被提交按钮占用的可用空间。
此外，通过使用border-radius属性，使文本字段的左侧角和提交按钮的右侧角变圆，你创建了一个看起来像统一表单部件的效果。结果看起来像图17-20底部的图像。

563